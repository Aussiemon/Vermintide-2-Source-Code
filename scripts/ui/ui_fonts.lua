Fonts = {
	arial = {
		"materials/fonts/gw_arial_16",
		14,
		"gw_arial_16"
	},
	arial_14 = {
		"materials/fonts/gw_arial_16",
		14,
		"gw_arial_16"
	},
	arial_16 = {
		"materials/fonts/gw_arial_16",
		16,
		"gw_arial_16"
	},
	arial_18 = {
		"materials/fonts/gw_arial_16",
		18,
		"gw_arial_16"
	},
	arial_14_masked = {
		"materials/fonts/gw_arial_16",
		14,
		"gw_arial_16_masked"
	},
	arial_16_masked = {
		"materials/fonts/gw_arial_16",
		16,
		"gw_arial_16_masked"
	},
	arial_18_masked = {
		"materials/fonts/gw_arial_16",
		18,
		"gw_arial_16_masked"
	},
	arial_14_write_mask = {
		"materials/fonts/gw_arial_16",
		14,
		"gw_arial_16_write_mask"
	},
	arial_16_write_mask = {
		"materials/fonts/gw_arial_16",
		16,
		"gw_arial_16_write_mask"
	},
	arial_18_write_mask = {
		"materials/fonts/gw_arial_16",
		18,
		"gw_arial_16_write_mask"
	},
	gw_body_20 = {
		"materials/fonts/gw_body_32",
		20,
		"gw_body_20"
	},
	gw_body_32 = {
		"materials/fonts/gw_body_32",
		32,
		"gw_body_32"
	},
	gw_body_64 = {
		"materials/fonts/gw_body_64",
		64,
		"gw_body_64"
	},
	gw_body_20_masked = {
		"materials/fonts/gw_body_32",
		20,
		"gw_body_20_masked"
	},
	gw_body_32_masked = {
		"materials/fonts/gw_body_32",
		32,
		"gw_body_32_masked"
	},
	gw_body_64_masked = {
		"materials/fonts/gw_body_64",
		64,
		"gw_body_64_masked"
	},
	gw_body_20_write_mask = {
		"materials/fonts/gw_body_32",
		20,
		"gw_body_20_write_mask"
	},
	gw_body_32_write_mask = {
		"materials/fonts/gw_body_32",
		32,
		"gw_body_32_write_mask"
	},
	gw_body_64_write_mask = {
		"materials/fonts/gw_body_64",
		64,
		"gw_body_64_write_mask"
	},
	gw_head_20 = {
		"materials/fonts/gw_head_32",
		20,
		"gw_head_20"
	},
	gw_head_32 = {
		"materials/fonts/gw_head_32",
		32,
		"gw_head_32"
	},
	gw_head_64 = {
		"materials/fonts/gw_head_64",
		64,
		"gw_head_64"
	},
	gw_head_20_masked = {
		"materials/fonts/gw_head_32",
		20,
		"gw_head_20_masked"
	},
	gw_head_32_masked = {
		"materials/fonts/gw_head_32",
		32,
		"gw_head_32_masked"
	},
	gw_head_64_masked = {
		"materials/fonts/gw_head_64",
		64,
		"gw_head_64_masked"
	},
	gw_head_20_write_mask = {
		"materials/fonts/gw_head_32",
		20,
		"gw_head_20_write_mask"
	},
	gw_head_32_write_mask = {
		"materials/fonts/gw_head_32",
		32,
		"gw_head_32_write_mask"
	},
	gw_head_64_write_mask = {
		"materials/fonts/gw_head_64",
		64,
		"gw_head_64_write_mask"
	},
	gw_arial_16 = {
		"materials/fonts/gw_arial_16",
		16,
		"gw_arial_16"
	},
	gw_arial_32 = {
		"materials/fonts/gw_arial_32",
		32,
		"gw_arial_32"
	},
	gw_arial_16_masked = {
		"materials/fonts/gw_arial_16",
		16,
		"gw_arial_16_masked"
	},
	gw_arial_32_masked = {
		"materials/fonts/gw_arial_32",
		32,
		"gw_arial_32_masked"
	},
	gw_arial_16_write_mask = {
		"materials/fonts/gw_arial_16",
		16,
		"gw_arial_16_write_mask"
	},
	gw_arial_32_write_mask = {
		"materials/fonts/gw_arial_32",
		32,
		"gw_arial_32_write_mask"
	}
}
DynamicFonts = {
	arial = {
		[18.0] = "arial_18",
		[16.0] = "arial_16",
		[14.0] = "arial_14"
	},
	arial_masked = {
		[18.0] = "arial_18_masked",
		[16.0] = "arial_16_masked",
		[14.0] = "arial_14_masked"
	},
	arial_write_mask = {
		[18.0] = "arial_18_write_mask",
		[16.0] = "arial_16_write_mask",
		[14.0] = "arial_14_write_mask"
	},
	hell_shark = {
		[64.0] = "gw_body_64",
		[20.0] = "gw_body_20",
		[32.0] = "gw_body_32"
	},
	hell_shark_masked = {
		[64.0] = "gw_body_64_masked",
		[20.0] = "gw_body_20_masked",
		[32.0] = "gw_body_32_masked"
	},
	hell_shark_write_mask = {
		[64.0] = "gw_body_64_write_mask",
		[20.0] = "gw_body_20_write_mask",
		[32.0] = "gw_body_32_write_mask"
	},
	hell_shark_no_outline = {
		[64.0] = "gw_body_64",
		[20.0] = "gw_body_20",
		[32.0] = "gw_body_32"
	},
	hell_shark_header = {
		[64.0] = "gw_head_64",
		[20.0] = "gw_head_20",
		[32.0] = "gw_head_32"
	},
	hell_shark_header_masked = {
		[64.0] = "gw_head_64_masked",
		[20.0] = "gw_head_20_masked",
		[32.0] = "gw_head_32_masked"
	},
	hell_shark_header_write_mask = {
		[64.0] = "gw_head_64_write_mask",
		[20.0] = "gw_head_20_write_mask",
		[32.0] = "gw_head_32_write_mask"
	},
	hell_shark_header_no_outline = {
		[32.0] = "gw_head_32",
		[64.0] = "gw_head_64"
	},
	hell_shark_arial = {
		[16.0] = "gw_arial_16",
		[32.0] = "gw_arial_32"
	},
	hell_shark_arial_masked = {
		[16.0] = "gw_arial_16_masked",
		[32.0] = "gw_arial_32_masked"
	},
	hell_shark_arial_write_mask = {
		[16.0] = "gw_arial_16_write_mask",
		[32.0] = "gw_arial_32_write_mask"
	}
}
local font_vertical_base = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz1234567890"
local font_height_base = "A"
FontHeights = FontHeights or {}
local math_floor = math.floor
local RESOLUTION_LOOKUP = RESOLUTION_LOOKUP

function UIFontByResolution(font_style, optional_scale)
	local font_type = font_style.font_type
	local font_size = font_style.font_size
	local fonts = DynamicFonts[font_type]
	local target_size = font_size
	local scale = RESOLUTION_LOOKUP.scale

	if optional_scale then
		scale = scale * optional_scale
	end

	target_size = (font_style.allow_fractions and font_size * scale) or math_floor(font_size * scale)
	local closest_size = nil
	local closest_diff = math.huge

	for size, font in pairs(fonts) do
		local diff = math.abs(target_size - size)

		if diff < closest_diff then
			closest_size = size
			closest_diff = diff
		end
	end

	local used_font_size = math.max(target_size, 1)

	return Fonts[fonts[closest_size]], used_font_size
end

function UISetupFontHeights(gui)
	local lol = math.random()
	local FontHeights = FontHeights

	for font_name, font_data in pairs(Fonts) do
		if FontHeights[font_name] == nil then
			FontHeights[font_name] = {}
			local material, size, font = unpack(font_data)
			local min, max, caret = Gui.text_extents(gui, font_vertical_base, material, size)
			local base_min, base_max, _ = Gui.text_extents(gui, font_height_base, material, size)
			FontHeights[font_name][size] = {
				base_max[3] - base_min[3],
				min[3],
				max[3]
			}
		end
	end
end

function UIGetFontHeight(gui, font_name, font_size)
	local FontHeights = FontHeights
	FontHeights[font_name] = FontHeights[font_name] or {}
	local height_data = FontHeights[font_name][font_size]

	if height_data then
		return unpack(height_data)
	end

	local material = Fonts[font_name][1]
	local min, max, caret = Gui.text_extents(gui, font_vertical_base, material, font_size)
	local base_min, base_max, caret = Gui.text_extents(gui, font_height_base, material, font_size)
	local height = base_max[3] - base_min[3]
	FontHeights[font_name][font_size] = {
		height,
		min[3],
		max[3]
	}

	return height, min.y, max.y
end

return
